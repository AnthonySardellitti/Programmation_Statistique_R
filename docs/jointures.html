<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 11 Jointures9 | Apprendre à programmer avec R</title>
  <meta name="description" content="Chapitre 11 Jointures9 | Apprendre à programmer avec R" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 11 Jointures9 | Apprendre à programmer avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapitre 11 Jointures9 | Apprendre à programmer avec R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 11 Jointures9 | Apprendre à programmer avec R" />
  
  <meta name="twitter:description" content="Chapitre 11 Jointures9 | Apprendre à programmer avec R" />
  

<meta name="author" content="Anthony SARDELLITTI" />


<meta name="date" content="2021-01-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chaines.html"/>
<link rel="next" href="entrainement.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Préface</a></li>
<li class="chapter" data-level="2" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>2</b> Présentation</a><ul>
<li class="chapter" data-level="2.1" data-path="presentation.html"><a href="presentation.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a><ul>
<li class="chapter" data-level="2.1.1" data-path="presentation.html"><a href="presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>2.1.1</b> À propos de R</a></li>
<li class="chapter" data-level="2.1.2" data-path="presentation.html"><a href="presentation.html#à-propos-de-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="2.1.3" data-path="presentation.html"><a href="presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>2.1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="2.1.4" data-path="presentation.html"><a href="presentation.html#structure-du-document"><i class="fa fa-check"></i><b>2.1.4</b> Structure du document</a></li>
<li class="chapter" data-level="2.1.5" data-path="presentation.html"><a href="presentation.html#prérequis"><i class="fa fa-check"></i><b>2.1.5</b> Prérequis</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="presentation.html"><a href="presentation.html#prise-en-main"><i class="fa fa-check"></i><b>2.2</b> Prise en main</a><ul>
<li class="chapter" data-level="2.2.1" data-path="presentation.html"><a href="presentation.html#la-console"><i class="fa fa-check"></i><b>2.2.1</b> La console</a></li>
<li class="chapter" data-level="2.2.2" data-path="presentation.html"><a href="presentation.html#objets"><i class="fa fa-check"></i><b>2.2.2</b> Objets</a></li>
<li class="chapter" data-level="2.2.3" data-path="presentation.html"><a href="presentation.html#fonctions"><i class="fa fa-check"></i><b>2.2.3</b> Fonctions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="presentation.html"><a href="presentation.html#fonctions-de-tests-et-comparaisons"><i class="fa fa-check"></i><b>2.3</b> Fonctions de tests et comparaisons</a><ul>
<li class="chapter" data-level="2.3.1" data-path="presentation.html"><a href="presentation.html#opérateurs-de-comparaisons"><i class="fa fa-check"></i><b>2.3.1</b> Opérateurs de comparaisons</a></li>
<li class="chapter" data-level="2.3.2" data-path="presentation.html"><a href="presentation.html#opérateurs-logiques"><i class="fa fa-check"></i><b>2.3.2</b> Opérateurs logiques</a></li>
<li class="chapter" data-level="2.3.3" data-path="presentation.html"><a href="presentation.html#fonctions-logiques"><i class="fa fa-check"></i><b>2.3.3</b> Fonctions logiques</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="presentation.html"><a href="presentation.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="presentation.html"><a href="presentation.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="presentation.html"><a href="presentation.html#installer-et-charger-des-extensions-packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="presentation.html"><a href="presentation.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a><ul>
<li class="chapter" data-level="2.6.1" data-path="presentation.html"><a href="presentation.html#sujet"><i class="fa fa-check"></i><b>2.6.1</b> Sujet</a></li>
<li class="chapter" data-level="2.6.2" data-path="presentation.html"><a href="presentation.html#correction"><i class="fa fa-check"></i><b>2.6.2</b> Correction</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="presentation.html"><a href="presentation.html#testez-vos-connaissances"><i class="fa fa-check"></i><b>2.7</b> Testez vos connaissances !</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="first-dataset.html"><a href="first-dataset.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a><ul>
<li class="chapter" data-level="3.1" data-path="first-dataset.html"><a href="first-dataset.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="first-dataset.html"><a href="first-dataset.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="first-dataset.html"><a href="first-dataset.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="first-dataset.html"><a href="first-dataset.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="first-dataset.html"><a href="first-dataset.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="first-dataset.html"><a href="first-dataset.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a><ul>
<li class="chapter" data-level="3.3.1" data-path="first-dataset.html"><a href="first-dataset.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="first-dataset.html"><a href="first-dataset.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="first-dataset.html"><a href="first-dataset.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>3.4</b> Combiner plusieurs variables</a><ul>
<li class="chapter" data-level="3.4.1" data-path="first-dataset.html"><a href="first-dataset.html#créer-une-nouvelle-variable-1"><i class="fa fa-check"></i><b>3.4.1</b> Créer une nouvelle variable</a></li>
<li class="chapter" data-level="3.4.2" data-path="first-dataset.html"><a href="first-dataset.html#créer-des-regroupements-de-modalités"><i class="fa fa-check"></i><b>3.4.2</b> Créer des regroupements de modalités</a></li>
<li class="chapter" data-level="3.4.3" data-path="first-dataset.html"><a href="first-dataset.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>3.4.3</b> Découper une variable numérique en classes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="first-dataset.html"><a href="first-dataset.html#exercices-1"><i class="fa fa-check"></i><b>3.5</b> Exercices</a><ul>
<li class="chapter" data-level="3.5.1" data-path="first-dataset.html"><a href="first-dataset.html#sujet-1"><i class="fa fa-check"></i><b>3.5.1</b> Sujet</a></li>
<li class="chapter" data-level="3.5.2" data-path="first-dataset.html"><a href="first-dataset.html#correction-1"><i class="fa fa-check"></i><b>3.5.2</b> Correction</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="first-dataset.html"><a href="first-dataset.html#testez-vos-connaissances-1"><i class="fa fa-check"></i><b>3.6</b> Testez vos connaissances !</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="first-import.html"><a href="first-import.html"><i class="fa fa-check"></i><b>4</b> Importer des données externes</a><ul>
<li class="chapter" data-level="4.1" data-path="first-import.html"><a href="first-import.html#import-de-fichiers-csv"><i class="fa fa-check"></i><b>4.1</b> Import de fichiers csv</a></li>
<li class="chapter" data-level="4.2" data-path="first-import.html"><a href="first-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>4.2</b> Interface interactive d’import de fichiers</a></li>
<li class="chapter" data-level="4.3" data-path="first-import.html"><a href="first-import.html#modifier-le-répertoire-actif"><i class="fa fa-check"></i><b>4.3</b> Modifier le répertoire actif</a></li>
<li class="chapter" data-level="4.4" data-path="first-import.html"><a href="first-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>4.4</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="4.5" data-path="first-import.html"><a href="first-import.html#export-de-données"><i class="fa fa-check"></i><b>4.5</b> Export de données</a><ul>
<li class="chapter" data-level="4.5.1" data-path="first-import.html"><a href="first-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>4.5.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="4.5.2" data-path="first-import.html"><a href="first-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>4.5.2</b> Sauvegarder des objets</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="first-import.html"><a href="first-import.html#exercices-2"><i class="fa fa-check"></i><b>4.6</b> Exercices</a><ul>
<li class="chapter" data-level="4.6.1" data-path="first-import.html"><a href="first-import.html#sujet-2"><i class="fa fa-check"></i><b>4.6.1</b> Sujet</a></li>
<li class="chapter" data-level="4.6.2" data-path="first-import.html"><a href="first-import.html#correction-2"><i class="fa fa-check"></i><b>4.6.2</b> Correction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulation-objet.html"><a href="manipulation-objet.html"><i class="fa fa-check"></i><b>5</b> Manipulation des objets</a><ul>
<li class="chapter" data-level="5.1" data-path="manipulation-objet.html"><a href="manipulation-objet.html#liste"><i class="fa fa-check"></i><b>5.1</b> Liste</a></li>
<li class="chapter" data-level="5.2" data-path="manipulation-objet.html"><a href="manipulation-objet.html#matrice"><i class="fa fa-check"></i><b>5.2</b> Matrice</a></li>
<li class="chapter" data-level="5.3" data-path="manipulation-objet.html"><a href="manipulation-objet.html#data-frame"><i class="fa fa-check"></i><b>5.3</b> Data frame</a><ul>
<li class="chapter" data-level="5.3.1" data-path="manipulation-objet.html"><a href="manipulation-objet.html#indexations-simples"><i class="fa fa-check"></i><b>5.3.1</b> Indexations simples</a></li>
<li class="chapter" data-level="5.3.2" data-path="manipulation-objet.html"><a href="manipulation-objet.html#indexations-avec-des-booléens"><i class="fa fa-check"></i><b>5.3.2</b> Indexations avec des booléens</a></li>
<li class="chapter" data-level="5.3.3" data-path="manipulation-objet.html"><a href="manipulation-objet.html#filtre-et-sélection-dans-un-data-frame"><i class="fa fa-check"></i><b>5.3.3</b> Filtre et sélection dans un data frame</a></li>
<li class="chapter" data-level="5.3.4" data-path="manipulation-objet.html"><a href="manipulation-objet.html#exercices-3"><i class="fa fa-check"></i><b>5.3.4</b> Exercices</a></li>
<li class="chapter" data-level="5.3.5" data-path="manipulation-objet.html"><a href="manipulation-objet.html#trier-un-data-frame"><i class="fa fa-check"></i><b>5.3.5</b> Trier un data frame</a></li>
<li class="chapter" data-level="5.3.6" data-path="manipulation-objet.html"><a href="manipulation-objet.html#exercice"><i class="fa fa-check"></i><b>5.3.6</b> Exercice</a></li>
<li class="chapter" data-level="5.3.7" data-path="manipulation-objet.html"><a href="manipulation-objet.html#agréger-des-données"><i class="fa fa-check"></i><b>5.3.7</b> Agréger des données</a></li>
<li class="chapter" data-level="5.3.8" data-path="manipulation-objet.html"><a href="manipulation-objet.html#exercice-1"><i class="fa fa-check"></i><b>5.3.8</b> Exercice</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphique.html"><a href="graphique.html"><i class="fa fa-check"></i><b>6</b> Représentation Graphique</a><ul>
<li class="chapter" data-level="6.1" data-path="graphique.html"><a href="graphique.html#les-fenêtres-graphiques"><i class="fa fa-check"></i><b>6.1</b> Les fenêtres graphiques</a></li>
<li class="chapter" data-level="6.2" data-path="graphique.html"><a href="graphique.html#les-fonctions-de-tracé-de-bas-niveau"><i class="fa fa-check"></i><b>6.2</b> Les fonctions de tracé de bas niveau</a></li>
<li class="chapter" data-level="6.3" data-path="graphique.html"><a href="graphique.html#personnaliser-des-éléments-graphiques"><i class="fa fa-check"></i><b>6.3</b> Personnaliser des éléments graphiques</a><ul>
<li class="chapter" data-level="6.3.1" data-path="graphique.html"><a href="graphique.html#mise-en-forme"><i class="fa fa-check"></i><b>6.3.1</b> Mise en forme</a></li>
<li class="chapter" data-level="6.3.2" data-path="graphique.html"><a href="graphique.html#gestion-des-couleurs"><i class="fa fa-check"></i><b>6.3.2</b> Gestion des couleurs</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="graphique.html"><a href="graphique.html#type-de-graphique"><i class="fa fa-check"></i><b>6.4</b> Type de graphique</a><ul>
<li class="chapter" data-level="6.4.1" data-path="graphique.html"><a href="graphique.html#boxplot"><i class="fa fa-check"></i><b>6.4.1</b> Boxplot</a></li>
<li class="chapter" data-level="6.4.2" data-path="graphique.html"><a href="graphique.html#histogramme"><i class="fa fa-check"></i><b>6.4.2</b> Histogramme</a></li>
<li class="chapter" data-level="6.4.3" data-path="graphique.html"><a href="graphique.html#diagramme-en-circulaire"><i class="fa fa-check"></i><b>6.4.3</b> Diagramme en circulaire</a></li>
<li class="chapter" data-level="6.4.4" data-path="graphique.html"><a href="graphique.html#diagramme-en-barre"><i class="fa fa-check"></i><b>6.4.4</b> Diagramme en barre</a></li>
<li class="chapter" data-level="6.4.5" data-path="graphique.html"><a href="graphique.html#nuage-de-points"><i class="fa fa-check"></i><b>6.4.5</b> Nuage de points</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="graphique.html"><a href="graphique.html#exercice-2"><i class="fa fa-check"></i><b>6.5</b> Exercice</a><ul>
<li class="chapter" data-level="6.5.1" data-path="graphique.html"><a href="graphique.html#sujet-6"><i class="fa fa-check"></i><b>6.5.1</b> Sujet</a></li>
<li class="chapter" data-level="6.5.2" data-path="graphique.html"><a href="graphique.html#correction-6"><i class="fa fa-check"></i><b>6.5.2</b> Correction</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="graphique.html"><a href="graphique.html#aller-plus-loin"><i class="fa fa-check"></i><b>6.6</b> Aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="algo.html"><a href="algo.html"><i class="fa fa-check"></i><b>7</b> Algorithme</a><ul>
<li class="chapter" data-level="7.1" data-path="algo.html"><a href="algo.html#construire-une-fonction"><i class="fa fa-check"></i><b>7.1</b> Construire une fonction</a></li>
<li class="chapter" data-level="7.2" data-path="algo.html"><a href="algo.html#construire-une-structure-conditionnelle"><i class="fa fa-check"></i><b>7.2</b> Construire une structure conditionnelle</a></li>
<li class="chapter" data-level="7.3" data-path="algo.html"><a href="algo.html#construire-une-boucle"><i class="fa fa-check"></i><b>7.3</b> Construire une boucle</a><ul>
<li class="chapter" data-level="7.3.1" data-path="algo.html"><a href="algo.html#la-boucle-for"><i class="fa fa-check"></i><b>7.3.1</b> La boucle <code>for</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="algo.html"><a href="algo.html#la-boucle-while"><i class="fa fa-check"></i><b>7.3.2</b> La boucle <code>while</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="algo.html"><a href="algo.html#exercice-3"><i class="fa fa-check"></i><b>7.4</b> Exercice</a><ul>
<li class="chapter" data-level="7.4.1" data-path="algo.html"><a href="algo.html#sujet-7"><i class="fa fa-check"></i><b>7.4.1</b> Sujet</a></li>
<li class="chapter" data-level="7.4.2" data-path="algo.html"><a href="algo.html#correction-7"><i class="fa fa-check"></i><b>7.4.2</b> Correction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply.html"><a href="apply.html"><i class="fa fa-check"></i><b>8</b> Les fonctions apply</a><ul>
<li class="chapter" data-level="8.1" data-path="apply.html"><a href="apply.html#fonction-apply"><i class="fa fa-check"></i><b>8.1</b> Fonction apply</a></li>
<li class="chapter" data-level="8.2" data-path="apply.html"><a href="apply.html#fonction-lapply"><i class="fa fa-check"></i><b>8.2</b> Fonction lapply</a></li>
<li class="chapter" data-level="8.3" data-path="apply.html"><a href="apply.html#fonction-sapply"><i class="fa fa-check"></i><b>8.3</b> Fonction sapply</a></li>
<li class="chapter" data-level="8.4" data-path="apply.html"><a href="apply.html#fonction-tapply"><i class="fa fa-check"></i><b>8.4</b> Fonction tapply</a></li>
<li class="chapter" data-level="8.5" data-path="apply.html"><a href="apply.html#exercice-4"><i class="fa fa-check"></i><b>8.5</b> Exercice</a><ul>
<li class="chapter" data-level="8.5.1" data-path="apply.html"><a href="apply.html#sujet-8"><i class="fa fa-check"></i><b>8.5.1</b> Sujet</a></li>
<li class="chapter" data-level="8.5.2" data-path="apply.html"><a href="apply.html#correction-8"><i class="fa fa-check"></i><b>8.5.2</b> Correction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>9</b> Manipuler les données avec dplyr</a><ul>
<li class="chapter" data-level="9.1" data-path="dplyr.html"><a href="dplyr.html#la-fonction-slice"><i class="fa fa-check"></i><b>9.1</b> La fonction <code>slice</code></a></li>
<li class="chapter" data-level="9.2" data-path="dplyr.html"><a href="dplyr.html#la-fonction-filter"><i class="fa fa-check"></i><b>9.2</b> La fonction <code>filter</code></a></li>
<li class="chapter" data-level="9.3" data-path="dplyr.html"><a href="dplyr.html#la-fonction-select"><i class="fa fa-check"></i><b>9.3</b> La fonction <code>select</code></a></li>
<li class="chapter" data-level="9.4" data-path="dplyr.html"><a href="dplyr.html#la-fonction-arrange"><i class="fa fa-check"></i><b>9.4</b> La fonction <code>arrange</code></a></li>
<li class="chapter" data-level="9.5" data-path="dplyr.html"><a href="dplyr.html#enchaîner-les-fonctions-avec-le-pipe"><i class="fa fa-check"></i><b>9.5</b> Enchaîner les fonctions avec le <em>pipe</em></a></li>
<li class="chapter" data-level="9.6" data-path="dplyr.html"><a href="dplyr.html#la-fonction-group_by"><i class="fa fa-check"></i><b>9.6</b> La fonction <code>group_by</code></a></li>
<li class="chapter" data-level="9.7" data-path="dplyr.html"><a href="dplyr.html#la-fonction-summarise"><i class="fa fa-check"></i><b>9.7</b> La fonction <code>summarise</code></a></li>
<li class="chapter" data-level="9.8" data-path="dplyr.html"><a href="dplyr.html#autres-fonctions-utiles-de-dplyr"><i class="fa fa-check"></i><b>9.8</b> Autres fonctions utiles de dplyr</a><ul>
<li class="chapter" data-level="9.8.1" data-path="dplyr.html"><a href="dplyr.html#la-fonction-rename"><i class="fa fa-check"></i><b>9.8.1</b> La fonction <code>rename</code></a></li>
<li class="chapter" data-level="9.8.2" data-path="dplyr.html"><a href="dplyr.html#la-fonction-mutate"><i class="fa fa-check"></i><b>9.8.2</b> La fonction <code>mutate</code></a></li>
<li class="chapter" data-level="9.8.3" data-path="dplyr.html"><a href="dplyr.html#la-fonction-distinct"><i class="fa fa-check"></i><b>9.8.3</b> La fonction <code>distinct</code></a></li>
<li class="chapter" data-level="9.8.4" data-path="dplyr.html"><a href="dplyr.html#la-fonction-case_when"><i class="fa fa-check"></i><b>9.8.4</b> La fonction <code>case_when</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chaines.html"><a href="chaines.html"><i class="fa fa-check"></i><b>10</b> Manipuler le texte et les dates</a><ul>
<li class="chapter" data-level="10.1" data-path="chaines.html"><a href="chaines.html#manipulation-des-chaînes-de-caractères"><i class="fa fa-check"></i><b>10.1</b> Manipulation des chaînes de caractères</a><ul>
<li class="chapter" data-level="10.1.1" data-path="chaines.html"><a href="chaines.html#concaténer-des-chaînes"><i class="fa fa-check"></i><b>10.1.1</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="10.1.2" data-path="chaines.html"><a href="chaines.html#majuscule-et-minuscule"><i class="fa fa-check"></i><b>10.1.2</b> Majuscule et minuscule</a></li>
<li class="chapter" data-level="10.1.3" data-path="chaines.html"><a href="chaines.html#longueur-dune-chaîne"><i class="fa fa-check"></i><b>10.1.3</b> Longueur d’une chaîne</a></li>
<li class="chapter" data-level="10.1.4" data-path="chaines.html"><a href="chaines.html#extraction-de-sous-chaînes"><i class="fa fa-check"></i><b>10.1.4</b> Extraction de sous-chaînes</a></li>
<li class="chapter" data-level="10.1.5" data-path="chaines.html"><a href="chaines.html#remplacement-de-chaînes"><i class="fa fa-check"></i><b>10.1.5</b> Remplacement de chaînes</a></li>
<li class="chapter" data-level="10.1.6" data-path="chaines.html"><a href="chaines.html#décomposition-dune-chaîne"><i class="fa fa-check"></i><b>10.1.6</b> Décomposition d’une chaîne</a></li>
<li class="chapter" data-level="10.1.7" data-path="chaines.html"><a href="chaines.html#recherche-de-sous-chaîne"><i class="fa fa-check"></i><b>10.1.7</b> Recherche de sous-chaîne</a></li>
<li class="chapter" data-level="10.1.8" data-path="chaines.html"><a href="chaines.html#aller-plus-loin-1"><i class="fa fa-check"></i><b>10.1.8</b> Aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chaines.html"><a href="chaines.html#manipulation-des-dates"><i class="fa fa-check"></i><b>10.2</b> Manipulation des dates</a><ul>
<li class="chapter" data-level="10.2.1" data-path="chaines.html"><a href="chaines.html#les-dates"><i class="fa fa-check"></i><b>10.2.1</b> Les dates</a></li>
<li class="chapter" data-level="10.2.2" data-path="chaines.html"><a href="chaines.html#lhorloge"><i class="fa fa-check"></i><b>10.2.2</b> L’horloge</a></li>
<li class="chapter" data-level="10.2.3" data-path="chaines.html"><a href="chaines.html#calcul-sur-les-dates"><i class="fa fa-check"></i><b>10.2.3</b> Calcul sur les dates</a></li>
<li class="chapter" data-level="10.2.4" data-path="chaines.html"><a href="chaines.html#aller-plus-loin-2"><i class="fa fa-check"></i><b>10.2.4</b> Aller plus loin</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="jointures.html"><a href="jointures.html"><i class="fa fa-check"></i><b>11</b> Jointures</a><ul>
<li class="chapter" data-level="11.1" data-path="jointures.html"><a href="jointures.html#principe-1"><i class="fa fa-check"></i><b>11.1</b> Principe</a></li>
<li class="chapter" data-level="11.2" data-path="jointures.html"><a href="jointures.html#types-de-jointures"><i class="fa fa-check"></i><b>11.2</b> Types de jointures</a><ul>
<li class="chapter" data-level="11.2.1" data-path="jointures.html"><a href="jointures.html#left-join"><i class="fa fa-check"></i><b>11.2.1</b> Left Join</a></li>
<li class="chapter" data-level="11.2.2" data-path="jointures.html"><a href="jointures.html#right-join"><i class="fa fa-check"></i><b>11.2.2</b> Right Join</a></li>
<li class="chapter" data-level="11.2.3" data-path="jointures.html"><a href="jointures.html#inner-join"><i class="fa fa-check"></i><b>11.2.3</b> Inner Join</a></li>
<li class="chapter" data-level="11.2.4" data-path="jointures.html"><a href="jointures.html#full-join"><i class="fa fa-check"></i><b>11.2.4</b> Full Join</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="jointures.html"><a href="jointures.html#exercice-5"><i class="fa fa-check"></i><b>11.3</b> Exercice</a><ul>
<li class="chapter" data-level="11.3.1" data-path="jointures.html"><a href="jointures.html#sujet-9"><i class="fa fa-check"></i><b>11.3.1</b> Sujet</a></li>
<li class="chapter" data-level="11.3.2" data-path="jointures.html"><a href="jointures.html#correction-9"><i class="fa fa-check"></i><b>11.3.2</b> Correction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="entrainement.html"><a href="entrainement.html"><i class="fa fa-check"></i><b>12</b> S’entrainer</a><ul>
<li class="chapter" data-level="12.1" data-path="entrainement.html"><a href="entrainement.html#tp1"><i class="fa fa-check"></i><b>12.1</b> TP1</a></li>
<li class="chapter" data-level="12.2" data-path="entrainement.html"><a href="entrainement.html#tp2"><i class="fa fa-check"></i><b>12.2</b> TP2</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="all-dataset.html"><a href="all-dataset.html"><i class="fa fa-check"></i><b>13</b> Jeux de données utilisés</a><ul>
<li class="chapter" data-level="13.1" data-path="all-dataset.html"><a href="all-dataset.html#iris"><i class="fa fa-check"></i><b>13.1</b> Iris</a></li>
<li class="chapter" data-level="13.2" data-path="all-dataset.html"><a href="all-dataset.html#histoire-de-vie-hdv2003"><i class="fa fa-check"></i><b>13.2</b> Histoire de vie (hdv2003)</a></li>
<li class="chapter" data-level="13.3" data-path="all-dataset.html"><a href="all-dataset.html#nyc-flights-2013"><i class="fa fa-check"></i><b>13.3</b> NYC Flights 2013</a><ul>
<li class="chapter" data-level="13.3.1" data-path="all-dataset.html"><a href="all-dataset.html#flights"><i class="fa fa-check"></i><b>13.3.1</b> Flights</a></li>
<li class="chapter" data-level="13.3.2" data-path="all-dataset.html"><a href="all-dataset.html#airlines"><i class="fa fa-check"></i><b>13.3.2</b> Airlines</a></li>
<li class="chapter" data-level="13.3.3" data-path="all-dataset.html"><a href="all-dataset.html#airports"><i class="fa fa-check"></i><b>13.3.3</b> Airports</a></li>
<li class="chapter" data-level="13.3.4" data-path="all-dataset.html"><a href="all-dataset.html#weather"><i class="fa fa-check"></i><b>13.3.4</b> Weather</a></li>
<li class="chapter" data-level="13.3.5" data-path="all-dataset.html"><a href="all-dataset.html#planes"><i class="fa fa-check"></i><b>13.3.5</b> Planes</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="all-dataset.html"><a href="all-dataset.html#google"><i class="fa fa-check"></i><b>13.4</b> Google</a></li>
<li class="chapter" data-level="13.5" data-path="all-dataset.html"><a href="all-dataset.html#pokemon"><i class="fa fa-check"></i><b>13.5</b> Pokemon</a></li>
<li class="chapter" data-level="13.6" data-path="all-dataset.html"><a href="all-dataset.html#star-wars"><i class="fa fa-check"></i><b>13.6</b> Star Wars</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="biblio.html"><a href="biblio.html"><i class="fa fa-check"></i><b>14</b> Bibliographie</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Apprendre à programmer avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jointures" class="section level1">
<h1><span class="header-section-number">Chapitre 11</span> Jointures<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></h1>
<div id="principe-1" class="section level2">
<h2><span class="header-section-number">11.1</span> Principe</h2>
<p>Les jointures permettent d’associer plusieurs tables dans une même requête. Cela permet d’exploiter la puissance des bases de données relationnelles pour obtenir des résultats qui combinent les données de plusieurs tables de manière efficace.</p>
<p>En général, les jointures consistent à associer des lignes de 2 tables en associant l’égalité des valeurs d’une colonne d’une première table par rapport à la valeur d’une colonne d’une seconde table.</p>
<p>Imaginons qu’une base de 2 données possède une table “utilisateur” et une autre table “abonnement” qui contient des informations sur les comptes de ces utilisateurs.</p>
<p>Voici la table utilisateur :</p>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Luca
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Martin
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Mélanie
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
François
</td>
<td style="text-align:right;">
21
</td>
</tr>
</tbody>
</table>
<p>Voici la table abonnement :</p>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:right;">
Like
</th>
<th style="text-align:right;">
Share
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
27
</td>
</tr>
</tbody>
</table>
<p>Imaginons qu’une base de 2 données possède une table “utilisateur” et une autre table “abonnement” qui contient les informations du nombre de pages aimées et partagées de ces utilisateurs. Avec une jointure, il est possible d’obtenir les données des deux tables.</p>
</div>
<div id="types-de-jointures" class="section level2">
<h2><span class="header-section-number">11.2</span> Types de jointures</h2>
<p>Il y a plusieurs types de jointures pour associer 2 tables ensemble. Voici la liste des 4 principales :</p>
<ul>
<li><p><strong>INNER JOIN</strong> : jointure interne pour retourner les enregistrements quand la condition est vrai dans les 2 tables. C’est l’une des jointures les plus communes.</p></li>
<li><p><strong>LEFT JOIN</strong> (ou LEFT OUTER JOIN) : jointure externe pour retourner tous les enregistrements de la table de gauche (LEFT = gauche) même si la condition n’est pas vérifié dans l’autre table.</p></li>
<li><p><strong>RIGHT JOIN</strong> (ou RIGHT OUTER JOIN) : jointure externe pour retourner tous les enregistrements de la table de droite (RIGHT = droite) même si la condition n’est pas vérifié dans l’autre table.</p></li>
<li><p><strong>FULL JOIN</strong> (ou FULL OUTER JOIN) : jointure externe pour retourner les résultats quand la condition est vrai dans au moins une des 2 tables.</p></li>
</ul>
<p><img src="img/sql.png" width="50%" style="display: block; margin: auto;" /></p>
<p>La fonction <code>merge</code> (du package <em>base</em> chargé par défaut dans RStudio) permet de réaliser ces 4 types de jointures. Cette fonction admet différents arguments selon la structure des deux tables à joindre :</p>
<ul>
<li><code>x</code>, <code>y</code> : le nom des deux tables à joindre</li>
<li><code>by</code> : le nom de la colonne commune jouant le rôle de clé primaire / étrangère</li>
<li><code>by.x</code>, <code>by.y</code> : le nom de chaque colonne jouant le rôle de clé primaire / étrangère <strong>si</strong> elles n’ont pas le même nom</li>
<li><code>all</code> : par défaut <code>FALSE</code> pour réaliser une inner join, <code>TRUE</code> pour une full join</li>
<li><code>all.x</code> : par défaut <code>FALSE</code>, <code>TRUE</code> pour réaliser une left join</li>
<li><code>all.y</code> : par défaut <code>FALSE</code>, <code>TRUE</code> pour réaliser une right join</li>
</ul>
<p>Le package <strong>dplyr</strong> permet également de réaliser des jointures avec les fonctions <em>left_join</em>, <em>right_join</em>, <em>full_join</em>, <em>inner_join</em> et d’aller plus loin. Les fonctions de jointure de <em>dplyr</em> ont un temps de traitement plus rapide que celles proposées par la fonction <code>merge</code>. Nous comparerons les deux méthodes dans la correction de l’exercice.</p>
<div id="left-join" class="section level3">
<h3><span class="header-section-number">11.2.1</span> Left Join</h3>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="jointures.html#cb674-1"></a>left &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> Utilisateur, <span class="dt">y =</span> Abonnement, <span class="dt">by =</span> <span class="st">&quot;Id_utilisateur&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
Like
</th>
<th style="text-align:right;">
Share
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Luca
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Martin
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Mélanie
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
François
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
</tr>
</tbody>
</table>
<p>En réalisant une jointure externe gauche, on observe :</p>
<ul>
<li>qu’on retrouve les informations des deux tables pour les id_utilisateur 1,3 et 4.</li>
<li>qu’on ne retrouve pas l’id_utilisateur 5 dans la table de sortie n’étant pas présent dans la table Utilisateur.</li>
<li>la présence de <code>NA</code> pour l’id_utilisateur 3 car il n’etait pas présent dans la table Abonnement.</li>
</ul>
</div>
<div id="right-join" class="section level3">
<h3><span class="header-section-number">11.2.2</span> Right Join</h3>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="jointures.html#cb675-1"></a>right &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> Utilisateur, <span class="dt">y =</span> Abonnement, <span class="dt">by =</span> <span class="st">&quot;Id_utilisateur&quot;</span>, <span class="dt">all.y =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
Like
</th>
<th style="text-align:right;">
Share
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Luca
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Martin
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
François
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
27
</td>
</tr>
</tbody>
</table>
<p>En réalisant une jointure externe droite, on observe :</p>
<ul>
<li>qu’on retrouve les informations des deux tables pour les id_utilisateur 1,2 et 4.</li>
<li>qu’on ne retrouve pas l’id_utilisateur 3 dans la table de sortie n’étant pas présent dans la table Abonnement</li>
<li>la présence de <code>NA</code> pour l’id_utilisateur 5 car il n’etait pas présent dans la table Utilisateur.</li>
</ul>
</div>
<div id="inner-join" class="section level3">
<h3><span class="header-section-number">11.2.3</span> Inner Join</h3>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="jointures.html#cb676-1"></a>inner &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> Utilisateur, <span class="dt">y =</span> Abonnement, <span class="dt">by =</span> <span class="st">&quot;Id_utilisateur&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
Like
</th>
<th style="text-align:right;">
Share
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Luca
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Martin
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
François
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
</tr>
</tbody>
</table>
<p>En réalisant une jointure interne, on observe :</p>
<ul>
<li>qu’on retrouve les informations des deux tables pour les id_utilisateur 1,2 et 4.</li>
<li>qu’on ne retrouve pas l’id_utilisateur 3 et 5 dans la table de sortie n’étant pas présents dans l’une des deux tables.</li>
</ul>
</div>
<div id="full-join" class="section level3">
<h3><span class="header-section-number">11.2.4</span> Full Join</h3>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="jointures.html#cb677-1"></a>full &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> Utilisateur, <span class="dt">y =</span> Abonnement, <span class="dt">by =</span> <span class="st">&quot;Id_utilisateur&quot;</span>, <span class="dt">all =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Id_utilisateur
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
Like
</th>
<th style="text-align:right;">
Share
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Luca
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Martin
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Mélanie
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
François
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
27
</td>
</tr>
</tbody>
</table>
<p>En réalisant une jointure externe, on observe :</p>
<ul>
<li>qu’on retrouve les informations des deux tables pour les id_utilisateur 1,2 et 4.</li>
<li>la présence de <code>NA</code> pour l’id_utilisateur 3 et 5 n’étant pas présents dans l’une des deux tables.</li>
</ul>
</div>
</div>
<div id="exercice-5" class="section level2">
<h2><span class="header-section-number">11.3</span> Exercice</h2>
<p>Pour illustrer ces notions, on utilise la base de données <em>nycflights13</em> du même package. La base de données est répartie en 5 tables et disponible à partir du package <em>nycflights13</em> :</p>
<ul>
<li>table <code>flights</code> (336776 x 20) : une ligne décrit un vol</li>
<li>table <code>airlines</code> (16 x 2) : une ligne décrit une compagnie</li>
<li>table <code>airports</code> (1458 x 8) : une ligne décrit un aéroport</li>
<li>table <code>planes</code> (3322 x 9) : une ligne décrit un appareil</li>
<li>table <code>weather</code> (26115 x 15) : une ligne décrit les conditions météorologiques au départ d’un vol avec une mesure par heure</li>
</ul>
<p>Voici le modèle relationnel de ces 5 tables :</p>
<p><img src="img/mcd.png" width="50%" style="display: block; margin: auto;" /></p>
<p><img src="img/table.PNG" width="719" style="display: block; margin: auto;" /></p>
<div id="sujet-9" class="section level3">
<h3><span class="header-section-number">11.3.1</span> Sujet</h3>
<ol style="list-style-type: lower-alpha">
<li>Affichez le nom des 3 compagnies avec le plus de vols.</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
nb_vols
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
United Air Lines Inc. 
</td>
<td style="text-align:right;">
58665
</td>
</tr>
<tr>
<td style="text-align:left;">
JetBlue Airways
</td>
<td style="text-align:right;">
54635
</td>
</tr>
<tr>
<td style="text-align:left;">
ExpressJet Airlines Inc. 
</td>
<td style="text-align:right;">
54173
</td>
</tr>
</tbody>
</table>
<ol start="2" style="list-style-type: lower-alpha">
<li>Affichez le nombre de vols à destination de chaque <code>tzone</code> (table <code>airports</code>).</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left;">
tzone
</th>
<th style="text-align:right;">
nb_vols
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
America/New_York
</td>
<td style="text-align:right;">
192377
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Chicago
</td>
<td style="text-align:right;">
74811
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Los_Angeles
</td>
<td style="text-align:right;">
46324
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Denver
</td>
<td style="text-align:right;">
10291
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
7602
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Phoenix
</td>
<td style="text-align:right;">
4656
</td>
</tr>
<tr>
<td style="text-align:left;">
Pacific/Honolulu
</td>
<td style="text-align:right;">
707
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Anchorage
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table>
<p>On observe que la catégorie <code>NA</code> signifie que certaines destinations ne sont pas référencées dans la table <code>airports</code>.</p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Dans quel aéroport y a-t-il le plus de précipitations ?</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left;">
origin
</th>
<th style="text-align:right;">
precip_moy
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
EWR
</td>
<td style="text-align:right;">
0.0050923
</td>
</tr>
<tr>
<td style="text-align:left;">
JFK
</td>
<td style="text-align:right;">
0.0037549
</td>
</tr>
<tr>
<td style="text-align:left;">
LGA
</td>
<td style="text-align:right;">
0.0042967
</td>
</tr>
</tbody>
</table>
<p>Pour obtenir ce résultat, on utilise la fonction <code>distinct</code> du package <em>dplyr</em> après la jointure.</p>
</div>
<div id="correction-9" class="section level3">
<h3><span class="header-section-number">11.3.2</span> Correction</h3>
<ol style="list-style-type: lower-alpha">
<li>Affichez le nom des 3 compagnies avec le plus de vols.</li>
</ol>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="jointures.html#cb678-1"></a><span class="co">#jointure sans dplyr</span></span>
<span id="cb678-2"><a href="jointures.html#cb678-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb678-3"><a href="jointures.html#cb678-3"></a>requete &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> flights,<span class="dt">y =</span> airlines, <span class="dt">by =</span> <span class="st">&quot;carrier&quot;</span>,<span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb678-4"><a href="jointures.html#cb678-4"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 2.243398 secs</code></pre>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="jointures.html#cb680-1"></a><span class="co">#jointure avec dplyr</span></span>
<span id="cb680-2"><a href="jointures.html#cb680-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb680-3"><a href="jointures.html#cb680-3"></a>requete &lt;-<span class="st"> </span><span class="kw">left_join</span>(<span class="dt">x =</span> flights, <span class="dt">y =</span> airlines, <span class="dt">by =</span> <span class="st">&quot;carrier&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Column `carrier` joining factor and character vector, coercing
## into character vector</code></pre>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="jointures.html#cb682-1"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 0.158848 secs</code></pre>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="jointures.html#cb684-1"></a>requete <span class="op">%&gt;%</span></span>
<span id="cb684-2"><a href="jointures.html#cb684-2"></a><span class="st">  </span><span class="kw">group_by</span>(name) <span class="op">%&gt;%</span></span>
<span id="cb684-3"><a href="jointures.html#cb684-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">nb_vols =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb684-4"><a href="jointures.html#cb684-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(nb_vols)) <span class="op">%&gt;%</span></span>
<span id="cb684-5"><a href="jointures.html#cb684-5"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb684-6"><a href="jointures.html#cb684-6"></a><span class="st">  </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
nb_vols
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
United Air Lines Inc. 
</td>
<td style="text-align:right;">
58665
</td>
</tr>
<tr>
<td style="text-align:left;">
JetBlue Airways
</td>
<td style="text-align:right;">
54635
</td>
</tr>
<tr>
<td style="text-align:left;">
ExpressJet Airlines Inc. 
</td>
<td style="text-align:right;">
54173
</td>
</tr>
</tbody>
</table>
<ol start="2" style="list-style-type: lower-alpha">
<li>Affichez le nombre de vols à destination de chaque <code>tzone</code> (table <code>airports</code>).</li>
</ol>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="jointures.html#cb685-1"></a><span class="co">#jointure sans dplyr</span></span>
<span id="cb685-2"><a href="jointures.html#cb685-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb685-3"><a href="jointures.html#cb685-3"></a>requete &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> flights,<span class="dt">y =</span> airports[,<span class="kw">c</span>(<span class="st">&quot;faa&quot;</span>,<span class="st">&quot;tzone&quot;</span>)], </span>
<span id="cb685-4"><a href="jointures.html#cb685-4"></a>                 <span class="dt">by.x =</span> <span class="st">&quot;dest&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;faa&quot;</span>, <span class="dt">all.x =</span>  <span class="ot">TRUE</span>)</span>
<span id="cb685-5"><a href="jointures.html#cb685-5"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 0.893326 secs</code></pre>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb687-1"><a href="jointures.html#cb687-1"></a><span class="co">#jointure avec dplyr</span></span>
<span id="cb687-2"><a href="jointures.html#cb687-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb687-3"><a href="jointures.html#cb687-3"></a>requete &lt;-<span class="st"> </span><span class="kw">left_join</span>(<span class="dt">x =</span> flights, </span>
<span id="cb687-4"><a href="jointures.html#cb687-4"></a>                     <span class="dt">y =</span> <span class="kw">select</span>(airports, <span class="kw">c</span>(<span class="st">&quot;faa&quot;</span>,<span class="st">&quot;tzone&quot;</span>)),</span>
<span id="cb687-5"><a href="jointures.html#cb687-5"></a>                     <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Column `dest`/`faa` joining factor and character vector, coercing
## into character vector</code></pre>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb689-1"><a href="jointures.html#cb689-1"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 0.145843 secs</code></pre>
<div class="sourceCode" id="cb691"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb691-1"><a href="jointures.html#cb691-1"></a>requete <span class="op">%&gt;%</span></span>
<span id="cb691-2"><a href="jointures.html#cb691-2"></a><span class="st">  </span><span class="kw">group_by</span>(tzone) <span class="op">%&gt;%</span></span>
<span id="cb691-3"><a href="jointures.html#cb691-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">nb_vols =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb691-4"><a href="jointures.html#cb691-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(nb_vols)) <span class="op">%&gt;%</span></span>
<span id="cb691-5"><a href="jointures.html#cb691-5"></a><span class="st">  </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
tzone
</th>
<th style="text-align:right;">
nb_vols
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
America/New_York
</td>
<td style="text-align:right;">
192377
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Chicago
</td>
<td style="text-align:right;">
74811
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Los_Angeles
</td>
<td style="text-align:right;">
46324
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Denver
</td>
<td style="text-align:right;">
10291
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
7602
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Phoenix
</td>
<td style="text-align:right;">
4656
</td>
</tr>
<tr>
<td style="text-align:left;">
Pacific/Honolulu
</td>
<td style="text-align:right;">
707
</td>
</tr>
<tr>
<td style="text-align:left;">
America/Anchorage
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table>
<p>On observe que la catégorie <code>NA</code> signifie que certaines destinations ne sont pas référencées dans la table <code>airports</code>.</p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Dans quel aéroport y a-t-il le plus de précipitations ?</li>
</ol>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="jointures.html#cb692-1"></a><span class="co">#jointure sans dplyr</span></span>
<span id="cb692-2"><a href="jointures.html#cb692-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb692-3"><a href="jointures.html#cb692-3"></a>requete &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> flights, <span class="dt">y =</span> weather,</span>
<span id="cb692-4"><a href="jointures.html#cb692-4"></a>                     <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;year&quot;</span> =<span class="st"> &quot;year&quot;</span>, <span class="st">&quot;month&quot;</span> =<span class="st"> &quot;month&quot;</span>, <span class="st">&quot;day&quot;</span> =<span class="st"> &quot;day&quot;</span>,</span>
<span id="cb692-5"><a href="jointures.html#cb692-5"></a>                            <span class="st">&quot;hour&quot;</span> =<span class="st"> &quot;hour&quot;</span> , <span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;origin&quot;</span>), <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb692-6"><a href="jointures.html#cb692-6"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 1.690838 secs</code></pre>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="jointures.html#cb694-1"></a><span class="co">#jointure avec dplyr</span></span>
<span id="cb694-2"><a href="jointures.html#cb694-2"></a>start.time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb694-3"><a href="jointures.html#cb694-3"></a>requete &lt;-<span class="st"> </span><span class="kw">left_join</span>(<span class="dt">x =</span> flights, <span class="dt">y =</span> weather,</span>
<span id="cb694-4"><a href="jointures.html#cb694-4"></a>                     <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;year&quot;</span> =<span class="st"> &quot;year&quot;</span>, <span class="st">&quot;month&quot;</span> =<span class="st"> &quot;month&quot;</span>, <span class="st">&quot;day&quot;</span> =<span class="st"> &quot;day&quot;</span>,</span>
<span id="cb694-5"><a href="jointures.html#cb694-5"></a>                            <span class="st">&quot;hour&quot;</span> =<span class="st"> &quot;hour&quot;</span> , <span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;origin&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Column `origin` joining factor and character vector, coercing into
## character vector</code></pre>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="jointures.html#cb696-1"></a><span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>start.time</span></code></pre></div>
<pre><code>## Time difference of 0.2716389 secs</code></pre>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="jointures.html#cb698-1"></a>requete <span class="op">%&gt;%</span></span>
<span id="cb698-2"><a href="jointures.html#cb698-2"></a><span class="st">  </span><span class="kw">select</span>(year, month, day, hour, origin, origin, precip) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb698-3"><a href="jointures.html#cb698-3"></a><span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></span>
<span id="cb698-4"><a href="jointures.html#cb698-4"></a><span class="st">  </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span></span>
<span id="cb698-5"><a href="jointures.html#cb698-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">precip_moy =</span> <span class="kw">mean</span>(precip,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb698-6"><a href="jointures.html#cb698-6"></a><span class="st">  </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
origin
</th>
<th style="text-align:right;">
precip_moy
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
EWR
</td>
<td style="text-align:right;">
0.0050923
</td>
</tr>
<tr>
<td style="text-align:left;">
JFK
</td>
<td style="text-align:right;">
0.0037549
</td>
</tr>
<tr>
<td style="text-align:left;">
LGA
</td>
<td style="text-align:right;">
0.0042967
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p> Extrait du site <a href="https://sql.sh/cours/jointures">sql.sh - https://sql.sh/cours/jointures</a><a href="jointures.html#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chaines.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="entrainement.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
